{"ast":null,"code":"import _objectSpread from\"C:/Users/nicolas/Desktop/curso de react/rursoreact/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/nicolas/Desktop/curso de react/rursoreact/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/nicolas/Desktop/curso de react/rursoreact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//@ts-check\nimport React,{useEffect,useState,createContext}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var contextoGeneral=/*#__PURE__*/createContext();export default function CartContext(_ref){var children=_ref.children;var _useState=useState(JSON.parse(localStorage.getItem(\"cart\"))||[]),_useState2=_slicedToArray(_useState,2),carrito=_useState2[0],setCarrito=_useState2[1];var _useState3=useState(\"0\"),_useState4=_slicedToArray(_useState3,2),quantity=_useState4[0],setQuantity=_useState4[1];function actCart(){var contador=0;if(carrito.length>0){carrito.forEach(function(element){contador=contador+element.cantidad;setQuantity(parseInt(contador));});}else{setQuantity(parseInt(\"0\"));}}function isInCart(id){var existInCart=carrito.findIndex(function(item){return item.id==id;});return existInCart;}function addItem(item,cantidad){// agregar cierta cantidad de un ítem al carrito\nvar pos=isInCart(item.id);if(pos==-1){setCarrito([].concat(_toConsumableArray(carrito),[_objectSpread(_objectSpread({},item),{},{cantidad:cantidad})]));}else{var carritoAux=_toConsumableArray(carrito);carritoAux[pos]=_objectSpread(_objectSpread({},carritoAux[pos]),{},{cantidad:carritoAux[pos].cantidad+cantidad});setCarrito(carritoAux);}}function removeItem(id){// Remover un item del cart por usando su id\nsetCarrito(carrito.filter(function(product){return product.id!==id;}));}function clear(){// Remover todos los items\nsetCarrito([]);}useEffect(function(){localStorage.setItem(\"cart\",JSON.stringify(carrito));actCart();},[carrito]);return/*#__PURE__*/_jsx(contextoGeneral.Provider,{value:{carrito:carrito,quantity:quantity,actCart:actCart,setQuantity:setQuantity,setCarrito:setCarrito,addItem:addItem,removeItem:removeItem,clear:clear,isInCart:isInCart},children:children});}","map":{"version":3,"names":["React","useEffect","useState","createContext","contextoGeneral","CartContext","children","JSON","parse","localStorage","getItem","carrito","setCarrito","quantity","setQuantity","actCart","contador","length","forEach","element","cantidad","parseInt","isInCart","id","existInCart","findIndex","item","addItem","pos","carritoAux","removeItem","filter","product","clear","setItem","stringify"],"sources":["C:/Users/nicolas/Desktop/curso de react/rursoreact/src/components/cartContext.jsx"],"sourcesContent":["//@ts-check\nimport React, { useEffect, useState, createContext } from \"react\";\n\nexport const contextoGeneral = createContext();\n\nexport default function CartContext({ children }) {\n    const [carrito, setCarrito] = useState(JSON.parse(localStorage.getItem(\"cart\")) || []);\n    const [quantity, setQuantity] = useState(\"0\");\n        \n\n    function actCart() {\n        let contador = 0;\n        if (carrito.length > 0) {\n            carrito.forEach(element => {\n                contador = contador + element.cantidad\n                setQuantity(parseInt(contador));\n            });\n        } else {\n            setQuantity(parseInt(\"0\"));\n        }\n    }\n\n    function isInCart(id) { \n        const existInCart = carrito.findIndex((item) => item.id == id);\n        return existInCart;\n    }\n\n    function addItem(item, cantidad) { // agregar cierta cantidad de un ítem al carrito\n        const pos = isInCart(item.id);\n        if (pos == -1) {\n            setCarrito([...carrito, {...item, cantidad}]);\n        } else {\n            const carritoAux = [...carrito];\n            carritoAux[pos] = { ...carritoAux[pos], cantidad: carritoAux[pos].cantidad + cantidad };\n            setCarrito(carritoAux);\n        }\n    }\n\n    function removeItem(id){  // Remover un item del cart por usando su id\n        setCarrito(carrito.filter(product => product.id !== id));\n    }\n\n    function clear() { // Remover todos los items\n        setCarrito([]);\n    }\n\n    useEffect(() => {\n        localStorage.setItem(\"cart\", JSON.stringify(carrito));\n        actCart();\n    }, [carrito])\n\n\n    return (\n        <contextoGeneral.Provider value={{carrito, quantity, actCart, setQuantity, setCarrito, addItem, removeItem, clear, isInCart }}>\n            {children}\n        </contextoGeneral.Provider>\n    );\n}"],"mappings":"+ZAAA;AACA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,aAAa,KAAQ,OAAO,CAAC,2CAElE,MAAO,IAAMC,gBAAe,cAAGD,aAAa,EAAE,CAE9C,cAAe,SAASE,YAAW,MAAe,IAAZC,SAAQ,MAARA,QAAQ,CAC1C,cAA8BJ,QAAQ,CAACK,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAI,EAAE,CAAC,wCAA/EC,OAAO,eAAEC,UAAU,eAC1B,eAAgCV,QAAQ,CAAC,GAAG,CAAC,yCAAtCW,QAAQ,eAAEC,WAAW,eAG5B,QAASC,QAAO,EAAG,CACf,GAAIC,SAAQ,CAAG,CAAC,CAChB,GAAIL,OAAO,CAACM,MAAM,CAAG,CAAC,CAAE,CACpBN,OAAO,CAACO,OAAO,CAAC,SAAAC,OAAO,CAAI,CACvBH,QAAQ,CAAGA,QAAQ,CAAGG,OAAO,CAACC,QAAQ,CACtCN,WAAW,CAACO,QAAQ,CAACL,QAAQ,CAAC,CAAC,CACnC,CAAC,CAAC,CACN,CAAC,IAAM,CACHF,WAAW,CAACO,QAAQ,CAAC,GAAG,CAAC,CAAC,CAC9B,CACJ,CAEA,QAASC,SAAQ,CAACC,EAAE,CAAE,CAClB,GAAMC,YAAW,CAAGb,OAAO,CAACc,SAAS,CAAC,SAACC,IAAI,QAAKA,KAAI,CAACH,EAAE,EAAIA,EAAE,GAAC,CAC9D,MAAOC,YAAW,CACtB,CAEA,QAASG,QAAO,CAACD,IAAI,CAAEN,QAAQ,CAAE,CAAE;AAC/B,GAAMQ,IAAG,CAAGN,QAAQ,CAACI,IAAI,CAACH,EAAE,CAAC,CAC7B,GAAIK,GAAG,EAAI,CAAC,CAAC,CAAE,CACXhB,UAAU,8BAAKD,OAAO,kCAAMe,IAAI,MAAEN,QAAQ,CAARA,QAAQ,KAAG,CACjD,CAAC,IAAM,CACH,GAAMS,WAAU,oBAAOlB,OAAO,CAAC,CAC/BkB,UAAU,CAACD,GAAG,CAAC,gCAAQC,UAAU,CAACD,GAAG,CAAC,MAAER,QAAQ,CAAES,UAAU,CAACD,GAAG,CAAC,CAACR,QAAQ,CAAGA,QAAQ,EAAE,CACvFR,UAAU,CAACiB,UAAU,CAAC,CAC1B,CACJ,CAEA,QAASC,WAAU,CAACP,EAAE,CAAC,CAAG;AACtBX,UAAU,CAACD,OAAO,CAACoB,MAAM,CAAC,SAAAC,OAAO,QAAIA,QAAO,CAACT,EAAE,GAAKA,EAAE,GAAC,CAAC,CAC5D,CAEA,QAASU,MAAK,EAAG,CAAE;AACfrB,UAAU,CAAC,EAAE,CAAC,CAClB,CAEAX,SAAS,CAAC,UAAM,CACZQ,YAAY,CAACyB,OAAO,CAAC,MAAM,CAAE3B,IAAI,CAAC4B,SAAS,CAACxB,OAAO,CAAC,CAAC,CACrDI,OAAO,EAAE,CACb,CAAC,CAAE,CAACJ,OAAO,CAAC,CAAC,CAGb,mBACI,KAAC,eAAe,CAAC,QAAQ,EAAC,KAAK,CAAE,CAACA,OAAO,CAAPA,OAAO,CAAEE,QAAQ,CAARA,QAAQ,CAAEE,OAAO,CAAPA,OAAO,CAAED,WAAW,CAAXA,WAAW,CAAEF,UAAU,CAAVA,UAAU,CAAEe,OAAO,CAAPA,OAAO,CAAEG,UAAU,CAAVA,UAAU,CAAEG,KAAK,CAALA,KAAK,CAAEX,QAAQ,CAARA,QAAS,CAAE,UACzHhB,QAAQ,EACc,CAEnC"},"metadata":{},"sourceType":"module"}